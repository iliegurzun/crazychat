<!DOCTYPE html>
<html lang="en">  
    <meta name="viewport" content="width=device-width, initial-scale=1.0">  
    <title>{% block title %}{{ seo_title() }}{% endblock title %}</title>
    <head>
        {% stylesheets filter="?yui_css, cssrewrite"
            'bundles/duedinoiadmin/css/bootstrap/bootstrap.css'
            'bundles/duedinoiadmin/css/font-awesome.css'
            'bundles/duedinoiweb/css/lightslider.css'
            'bundles/duedinoiweb/css/jqtransform.css'
            'bundles/duedinoiweb/css/style.css'
          %}
        <link href="{{ asset_url }}" rel="stylesheet" media="screen">
        {% endstylesheets %}
        {% block stylesheets %}{% endblock stylesheets %}
        <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.0.3/angular.min.js"></script>
         {% javascripts filter="?yui_js"
            "@DuedinoiAdminBundle/Resources/public/js/jquery-1.11.0.js"
            "@DuedinoiAdminBundle/Resources/public/js/bootstrap.js"
            "@DuedinoiWebBundle/Resources/public/js/bootstrap-growl.js"
            "@DuedinoiWebBundle/Resources/public/js/lightslider.js"
            "@DuedinoiWebBundle/Resources/public/js/jquery.jqtransform.js"
            "@DuedinoiWebBundle/Resources/public/js/autosize.js"
            "@DuedinoiWebBundle/Resources/public/js/desktop-notify-min.js"
            "@DuedinoiWebBundle/Resources/public/js/main.js"
        %}
        <script type="text/javascript" src="{{ asset_url }}"></script>
        {% endjavascripts %}

        <script type="text/javascript">
            {% if is_granted('IS_AUTHENTICATED_FULLY') %}
                var getTokenUrl = '{{ path('duedinoi_get_video_token') }}';
                function NotificationCenter($scope) {
                    var permissionLevels = {};
                    permissionLevels[notify.PERMISSION_GRANTED] = 0;
                    permissionLevels[notify.PERMISSION_DEFAULT] = 1;
                    permissionLevels[notify.PERMISSION_DENIED] = 2;
                    $scope.isSupported = notify.isSupported;
                    $scope.permissionLevel = permissionLevels[notify.permissionLevel()];
                    $scope.getClassName = function() {
                        if ($scope.permissionLevel === 0) {
                            return "allowed"
                        } else if ($scope.permissionLevel === 1) {
                            return "default"
                        } else {
                            return "denied"
                        }
                    }
                    $scope.callback = function() {
                        console.log("test");
                    }
                    $scope.requestPermissions = function() {
                        notify.requestPermission(function() {
                            $scope.$apply($scope.permissionLevel = permissionLevels[notify.permissionLevel()]);
                        });
                    }
                }
            {% endif %}
        </script>

        {% block javascripts %}{% endblock javascripts %}
    </head>
    <body class="{% block body_class %}{% endblock %}">
    {% include "DuedinoiWebBundle:Component:flash.html.twig" %}
    {% block content %}
    {% endblock content %}
    {% block footer %}
        {%  include "DuedinoiWebBundle:Component:footer.html.twig" %}
    {% endblock %}
    </body>
</html>